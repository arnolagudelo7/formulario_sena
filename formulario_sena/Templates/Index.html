{% include 'inc/Header.html' %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de registro</title>
</head>
<body>
    <form action="" method="post">

        {% csrf_token %}

        <label for="LugarEvento">Elija el lugar donde se desarrollara el evento:</label>
        <select name="LugarEvento_Id" id="LugarEvento">
            <option value="" selected>Seleccionar</option>
            {% for L in lugar %}
            <option value="{{ L.Id_Lugar }}">{{ L.LugarEvento }}</option>
            {% endfor %}
        </select>

        <label for="NombreCompleto">Escriba sus nombres y apellidos:</label>
        <input type="text" name="NombreCompleto" id="NombreCompleto">

        <label for="NumeroDocumento">Ingrese su numero de documento:</label>
        <input type="text" name="NumeroDocumento" id="NumeroDocumento">

        <label for="Planta">Elija a donde pertenezca:</label>
        <div>
            <select name="Planta" id="Planta">
                <option value="" selected>Seleccionar</option>
                <option value="planta">Planta</option>
                <option value="contratista">Contratista</option>
                <option value="Aprendiz">Aprendiz</option>
                <option value="other">Otro</option>
            </select>
        </div>

        <label for="Dependencia">Escriba la dependecia u empresa a la que pertenezca:</label>
        <input type="text" name="Dependencia" id="Dependencia">

        <label for="Correo">Ingrese su correo electronico:</label>
        <input type="text" name="Correo" id="Correo">

        <label for="Telefono">Ingrese su telefono | Ext.sena</label>
        <input type="text" name="Telefono" id="Telefono">

        <label for="Autorizacion">Autorizo la grabacion del evento:</label>
        <select name="Autorizacion" id="Autorizacion">
            <option value="" selected>Elija una opcion</option>
            <option value="Si">Si</option>
            <option value="No">No</option>
        </select>

        <button type="submit">Registrar</button>

    </form>

    <script>
        const dependencia = document.querySelector("#Planta")
        const toggleInput = "other"
        const dependencyName = "Planta"
        const dependencyInput = `<input type='text' placeholder='Â¿Cual?' name='${dependencyName}' id='Otro'/>`
        let isSet = false

        dependencia?.addEventListener("change", event => {
            const {target} = event
            if (target.value === toggleInput && !isSet) {
                target.closest("div").insertAdjacentHTML("beforeend", dependencyInput)
                target.closest("select").name = ""
                isSet = true
            }
            else if (isSet) {
                target?.closest("div").querySelector("input").remove()
                target.closest("select").name = dependencyName
                isSet = false
            }

        })
    </script>
</body>
</html>